<ion-header>
  <ion-toolbar>
    <ion-title>Sign Up</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form (ngSubmit)="onSubmit()" #signUpForm="ngForm">
    <ion-item>
      <ion-label position="floating">Full Name</ion-label>
      <ion-input
        type="text"
        name="name"
        [(ngModel)]="name"
        required
      ></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Username</ion-label>
      <ion-input
        type="text"
        name="username"
        [(ngModel)]="username"
        required
      ></ion-input>
    </ion-item>
    <div *ngIf="usernameExists" class="error-message">
      Username already exists.
    </div>

    <ion-item>
      <ion-label position="floating">Password</ion-label>
      <ion-input
        type="password"
        name="password"
        [(ngModel)]="password"
        required
      ></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Repeat Password</ion-label>
      <ion-input
        type="password"
        name="repeatPassword"
        [(ngModel)]="repeatPassword"
        required
      ></ion-input>
    </ion-item>
    <div *ngIf="passwordMismatch" class="error-message">
      Passwords do not match.
    </div>

    <ion-item>
      <ion-checkbox
        [(ngModel)]="agree"
        name="agree"
        (ionChange)="checkAgreement()"
      ></ion-checkbox>
      <ion-label>I agree with terms and conditions</ion-label>
    </ion-item>

    <ion-button
      expand="full"
      type="submit"
      [disabled]="!isFormValid() || !agree"
    >
      Submit
    </ion-button>
    <ion-button expand="full" routerLink="/login">Back</ion-button>

    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  </form>
</ion-content>
